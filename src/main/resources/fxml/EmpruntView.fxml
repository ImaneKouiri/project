<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.bibliotheque.controller.EmpruntController"
      spacing="15"
      alignment="TOP_CENTER"
      prefWidth="1000"
      prefHeight="700"
      style="-fx-padding: 15;">

    <Label text="Gestion des Emprunts"
           style="-fx-font-size: 22px; -fx-font-weight: bold;" />

    <TitledPane text="Emprunter un livre" expanded="true">
        <VBox spacing="10" style="-fx-padding: 10;">
            <HBox spacing="10">
                <Label text="ISBN Livre :" />
                <TextField fx:id="isbnField" promptText="ISBN du livre" />
            </HBox>

            <HBox spacing="10">
                <Label text="ID Membre :" />
                <TextField fx:id="membreIdField" promptText="ID du membre" />
            </HBox>

            <Button text="Enregistrer l'emprunt"
                    onAction="#handleEmprunter" />
        </VBox>
    </TitledPane>

    <TitledPane text="Retourner un livre" expanded="false">
        <VBox spacing="10" style="-fx-padding: 10;">
            <HBox spacing="10">
                <Label text="ID Emprunt :" />
                <TextField fx:id="empruntIdField" promptText="ID de l'emprunt" />
            </HBox>

            <Button text="Retourner le livre"
                    onAction="#handleRetour" />
        </VBox>
    </TitledPane>

    <TitledPane text="Recherche & Affichage" expanded="true">
        <VBox spacing="10" style="-fx-padding: 10;">

            <HBox spacing="10">
                <Label text="ID Membre :" />
                <TextField fx:id="rechercheMembreIdField" promptText="ID du membre" />
                <Button text="Rechercher"
                        onAction="#handleRechercherParMembre" />
            </HBox>

            <HBox spacing="10">
                <Button text="Emprunts en cours"
                        onAction="#handleAfficherEmpruntsEnCours" />
                <Button text="Emprunts en retard"
                        onAction="#handleAfficherEmpruntsEnRetard" />
                <Button text="Statistiques"
                        onAction="#handleAfficherStatistiques" />
            </HBox>
        </VBox>
    </TitledPane>

    <Label text="Liste des emprunts"
           style="-fx-font-size: 16px; -fx-font-weight: bold;" />

    <TableView fx:id="empruntsTable" prefHeight="250" prefWidth="950">
        <columns>
            <TableColumn fx:id="colId" text="ID" prefWidth="60" />
            <TableColumn fx:id="colIsbn" text="ISBN" prefWidth="120" />
            <TableColumn fx:id="colMembreId" text="ID Membre" prefWidth="90" />
            <TableColumn fx:id="colDateEmprunt" text="Date Emprunt" prefWidth="120" />
            <TableColumn fx:id="colDateRetourPrevue" text="Retour Prévu" prefWidth="120" />
            <TableColumn fx:id="colRendu" text="Rendu" prefWidth="80" />
            <TableColumn fx:id="colPenalite" text="Pénalité (DH)" prefWidth="120" />
        </columns>
    </TableView>

    <Label text="Résultats / Détails"
           style="-fx-font-size: 16px; -fx-font-weight: bold;" />

    <TextArea fx:id="resultatArea"
              prefHeight="150"
              editable="false"
              wrapText="true" />

</VBox>
